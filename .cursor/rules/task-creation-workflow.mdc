# Task Creation Workflow - Automatic Task Expansion Engine

## Overview

Workflow nÃ y tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i cÃ¡c yÃªu cáº§u tÃ­nh nÄƒng cáº¥p cao thÃ nh há»‡ thá»‘ng task chi tiáº¿t, sáºµn sÃ ng triá»ƒn khai trong `.kiro/specs/{project}/tasks.md`. ÄÆ°á»£c thiáº¿t káº¿ Ä‘á»ƒ hoáº¡t Ä‘á»™ng vá»›i Claude, Cursor, Trae AI vÃ  Kiro system.

## Core Directive

Khi nháº­n Ä‘Æ°á»£c Báº¤T Ká»² yÃªu cáº§u tÃ­nh nÄƒng nÃ o, tá»± Ä‘á»™ng táº¡o ra Táº¤T Cáº¢ cÃ¡c sub-features, tasks vÃ  technical specifications cáº§n thiáº¿t cho viá»‡c triá»ƒn khai hoÃ n chá»‰nh.

## Task Expansion Rules

### 1. Feature Auto-Expansion Pattern
Vá»›i báº¥t ká»³ feature X nÃ o, tá»± Ä‘á»™ng bao gá»“m:
- **Authentication & Authorization**: XÃ¡c thá»±c vÃ  phÃ¢n quyá»n
- **CRUD Operations**: Create, Read, Update, Delete
- **User Interface**: Forms, views, lists, components
- **API Endpoints & Data Models**: Backend APIs vÃ  data structures
- **Validation & Error Handling**: Input validation vÃ  xá»­ lÃ½ lá»—i
- **Security & Privacy**: Báº£o máº­t vÃ  quyá»n riÃªng tÆ°
- **Settings & Preferences**: CÃ i Ä‘áº·t vÃ  tÃ¹y chá»n
- **Admin/Management**: Quáº£n trá»‹ vÃ  Ä‘iá»u hÃ nh
- **Analytics & Logging**: PhÃ¢n tÃ­ch vÃ  ghi log
- **Related Features**: CÃ¡c tÃ­nh nÄƒng liÃªn quan mÃ  user mong Ä‘á»£i

### 2. Task Hierarchy Template
```
Feature â†’ Sub-features â†’ Tasks â†’ Subtasks â†’ Technical Details
VÃ­ dá»¥: 
Profile â†’ Edit Profile â†’ Avatar Upload â†’ [2.1 UI Design, 2.2 Validation Logic, 2.3 Storage Integration, 2.4 Testing]
Má»—i task chÃ­nh pháº£i cÃ³ 4-6 subtasks theo pattern: UI â†’ Logic â†’ Integration â†’ Testing
```

### 3. Mandatory Inclusions
Má»—i feature PHáº¢I táº¡o tasks cho:
- **UI/UX**: Táº¥t cáº£ screens, forms, components, states (loading/error/empty/success)
- **Backend**: APIs, validation, business logic, database operations
- **Security**: Authentication, authorization, data protection, audit logs
- **Quality**: Error handling, edge cases, performance, testing
- **Operations**: Deployment, monitoring, documentation

### 4. Detail Level Requirements
Vá»›i má»—i task, chá»‰ Ä‘á»‹nh:
- **What**: MÃ´ táº£ rÃµ rÃ ng vÃ  acceptance criteria
- **Subtasks**: 4-6 subtasks theo progressive complexity
- **UI**: Component specs, layouts, responsive behavior
- **API**: Endpoints, request/response formats, validation rules
- **Data**: Models, relationships, constraints
- **Logic**: Business rules, workflows, calculations
- **Errors**: Táº¥t cáº£ possible failures vÃ  handling
- **Implementation Guide**: Code examples vÃ  technical specifications

### 5. Smart Context Awareness
- ThÃ­ch á»©ng Ä‘á»™ phá»©c táº¡p vá»›i target users (ngÆ°á»i cao tuá»•i = UI lá»›n hÆ¡n, flows Ä‘Æ¡n giáº£n hÆ¡n)
- Bao gá»“m platform-specific needs (mobile = offline mode, desktop = keyboard shortcuts)
- Xem xÃ©t industry requirements (healthcare = HIPAA, finance = PCI)
- ThÃªm regional needs khi Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh (country-specific validations, languages)

## Kiro Integration Workflow

### Step 1: Project Context Detection
```
1. Kiá»ƒm tra current working directory
2. XÃ¡c Ä‘á»‹nh project name tá»« .kiro/specs/ structure
3. Validate existence cá»§a .kiro/specs/{project}/
4. Náº¿u khÃ´ng tá»“n táº¡i â†’ táº¡o project structure
5. Load existing requirements.md vÃ  design.md Ä‘á»ƒ hiá»ƒu context
```

### Step 2: Feature Analysis & Expansion
```
1. Parse user input Ä‘á»ƒ xÃ¡c Ä‘á»‹nh core feature
2. Apply Auto-Expansion Pattern
3. Generate comprehensive sub-features list
4. Cross-reference vá»›i existing tasks Ä‘á»ƒ trÃ¡nh duplication
5. Prioritize tasks based on dependencies vÃ  business value
```

### Step 3: Task Generation
```
1. Convert má»—i sub-feature thÃ nh detailed tasks vá»›i subtask breakdown
2. Apply progressive complexity ordering (UI â†’ Logic â†’ Integration â†’ Testing)
3. Generate unique task IDs vá»›i hierarchical numbering
4. Set dependencies vÃ  priorities
5. Create comprehensive acceptance criteria
6. Add technical depth vá»›i implementation guides
```

### Step 4: Integration & Validation
```
1. Merge vá»›i existing tasks.md
2. Validate task dependencies
3. Check for conflicts vá»›i existing tasks
4. Update task numbering vÃ  references
5. Sync vá»›i requirements.md vÃ  design.md
```

## Standard Task Format for Kiro

### Enhanced Professional Task Format (Based on new_task.md Template)
```markdown
### {Task Number}. {Task Name}
**Status**: âŒ Not Started
**Priority**: {CRITICAL|HIGH|MEDIUM|LOW}
**Estimated Time**: {X hours}
**Dependencies**: {List of dependent tasks or "None"}

**Description**: 
{Comprehensive 2-3 sentence description explaining what this task accomplishes, why it's important, and how it fits into the overall project}

**Key Files**: 
- `{PrimaryFile.kt}` ({modify|new})
- `{SecondaryFile.kt}` ({modify|new})
- `{AdditionalFile.kt}` ({modify|new})
- `{ViewModelFile.kt}` ({modify|new})

**Subtasks**:
- [ ] {ID}.1 {Specific UI/Component Implementation}
  - {Detailed description of UI component or screen to build}
  - {Specific UI elements, layouts, and interactions required}
  - {User experience considerations and accessibility requirements}
  - {Visual design specifications and responsive behavior}
  - _Requirements: {Specific UI outcome}_

- [ ] {ID}.2 {Business Logic and Data Processing}
  - {Detailed description of core functionality and business rules}
  - {Data processing, validation, and transformation logic}
  - {Integration with existing business logic and use cases}
  - {State management and data flow considerations}
  - _Requirements: {Specific functionality outcome}_

- [ ] {ID}.3 {Data Layer and Storage Integration}
  - {Database schema changes, entity modifications, or new models}
  - {Repository pattern implementation and data access logic}
  - {Data persistence, caching, and synchronization requirements}
  - {Migration scripts and data integrity considerations}
  - _Requirements: {Specific data outcome}_

- [ ] {ID}.4 {API and Service Integration}
  - {External API integrations, network calls, and service connections}
  - {Request/response handling and data mapping}
  - {Authentication, authorization, and security considerations}
  - {Error handling for network failures and service unavailability}
  - _Requirements: {Specific integration outcome}_

- [ ] {ID}.5 {Error Handling and Edge Cases}
  - {Comprehensive error scenarios and exception handling}
  - {Input validation, boundary conditions, and edge cases}
  - {User feedback for errors and recovery mechanisms}
  - {Logging, monitoring, and debugging considerations}
  - _Requirements: {Specific robustness outcome}_

- [ ] {ID}.6 {Testing and Quality Assurance}
  - {Unit testing for all components and business logic}
  - {Integration testing for data flow and API connections}
  - {UI testing for user interactions and accessibility}
  - {Performance testing and optimization verification}
  - _Requirements: {Specific quality outcome}_

**Implementation Guide**: `implementation-guides/{task-name-guide}.md`
```

### Critical Task Creation Standards

#### Mandatory Task Structure Requirements
1. **Báº®T BUá»˜C** má»—i task pháº£i cÃ³ Ä‘Ãºng format trÃªn vá»›i táº¥t cáº£ cÃ¡c sections
2. **Báº®T BUá»˜C** Estimated Time pháº£i realistic (4-20 hours per task)
3. **Báº®T BUá»˜C** Key Files pháº£i list ra táº¥t cáº£ files sáº½ Ä‘Æ°á»£c modify/create
4. **Báº®T BUá»˜C** má»—i subtask pháº£i cÃ³ 4 bullet points chi tiáº¿t + Requirements line
5. **Báº®T BUá»˜C** Description pháº£i explain business value vÃ  technical context
6. **Báº®T BUá»˜C** Dependencies pháº£i accurate vÃ  reference Ä‘Ãºng task numbers

#### Subtask Detail Requirements
- **Subtask 1 (UI)**: Pháº£i specify exact components, screens, layouts, interactions
- **Subtask 2 (Logic)**: Pháº£i detail business rules, algorithms, data processing
- **Subtask 3 (Data)**: Pháº£i specify database changes, models, repositories
- **Subtask 4 (API)**: Pháº£i detail external integrations, network handling
- **Subtask 5 (Errors)**: Pháº£i cover all error scenarios vÃ  user feedback
- **Subtask 6 (Testing)**: Pháº£i specify testing types vÃ  coverage requirements

#### Content Quality Standards
- Má»—i bullet point trong subtask pháº£i actionable vÃ  specific
- TrÃ¡nh generic descriptions, pháº£i cÃ³ concrete technical details
- Include user experience considerations trong UI subtasks
- Specify exact file names vÃ  whether they're new or modified
- Requirements line pháº£i measurable vÃ  verifiable

### Phase Organization and Progress Tracking

#### Mandatory Project Structure
```markdown
# {Project Name} - Implementation Tasks

## ğŸ“Š Progress Overview
**Phase 1 ({Phase Name})**: 0/{X} tasks completed (0%)
**Phase 2 ({Phase Name})**: 0/{Y} tasks completed (0%)
**Phase 3 ({Phase Name})**: 0/{Z} tasks completed (0%)
**Total Progress**: 0/{Total} tasks completed (0%)

## ğŸ¯ Project Context

**Current State**: {Current project status and completion percentage}
**Architecture**: {Architecture pattern being used}
**Tech Stack**: {Key technologies and frameworks}
**Main Issues**: {Current problems that need to be addressed}

**Key Files**:
- {Important File 1}: `{file/path/File1.kt}`
- {Important File 2}: `{file/path/File2.kt}`

---

## ğŸš¨ PHASE 1: {PHASE NAME} (Start Here)

{Phase 1 tasks...}

---

## ğŸš€ PHASE 2: {PHASE NAME}

{Phase 2 tasks...}

---

## ğŸ¨ PHASE 3: {PHASE NAME}

{Phase 3 tasks...}
```

#### Phase Organization Rules
1. **Báº®T BUá»˜C** chia tasks thÃ nh 3 phases vá»›i priorities rÃµ rÃ ng:
   - **Phase 1**: CRITICAL/HIGH priority - Core functionality vÃ  UX fixes
   - **Phase 2**: MEDIUM priority - Enhanced features vÃ  integrations
   - **Phase 3**: LOW/NICE-TO-HAVE - Advanced features vÃ  optimizations

2. **Báº®T BUá»˜C** má»—i phase pháº£i cÃ³:
   - Clear phase name vÃ  description
   - Appropriate emoji indicators (ğŸš¨ for critical, ğŸš€ for enhanced, ğŸ¨ for advanced)
   - Logical task ordering vá»›i dependencies
   - Realistic task distribution (3-7 tasks per phase)

3. **Báº®T BUá»˜C** Progress Overview pháº£i:
   - Show exact task counts per phase
   - Calculate accurate percentages
   - Update as tasks are completed
   - Provide clear project status visibility

#### Task Numbering and Dependencies
1. **Báº®T BUá»˜C** sá»­ dá»¥ng sequential numbering: 1, 2, 3, 4, 5...
2. **Báº®T BUá»˜C** dependencies pháº£i reference exact task numbers
3. **Báº®T BUá»˜C** "None" cho tasks khÃ´ng cÃ³ dependencies
4. **Báº®T BUá»˜C** logical dependency flow (UI â†’ Logic â†’ Integration â†’ Testing)

#### Project Context Requirements
1. **Báº®T BUá»˜C** Current State pháº£i accurate vÃ  informative
2. **Báº¯T BUá»˜C** Architecture pháº£i specify pattern (Clean Architecture, MVVM, etc.)
3. **Báº®T BUá»˜C** Tech Stack pháº£i list key technologies
4. **Báº®T BUá»˜C** Main Issues pháº£i identify current problems
5. **Báº®T BUá»˜C** Key Files pháº£i list most important files vá»›i full paths

## Auto-Expansion Examples

### Input: "User Profile"
**Auto-Expands To:**

### 1. User Registration System
**Status**: âŒ Not Started | **Priority**: HIGH | **Time**: 12h | **Dependencies**: None

**Key Files**: `RegistrationScreen.kt` (new), `RegistrationViewModel.kt` (new), `UserRepository.kt` (modify)

**Subtasks**: UI Design, Form Validation, API Integration, Email Verification, Error Handling, Testing

---

### 2. Profile CRUD Operations  
**Status**: âŒ Not Started | **Priority**: HIGH | **Time**: 16h | **Dependencies**: 1

**Key Files**: `ProfileScreen.kt` (new), `EditProfileScreen.kt` (new), `ProfileViewModel.kt` (new)

**Subtasks**: Profile View UI, Edit Form, Data Validation, Real-time Updates, Conflict Resolution, Integration Testing

---

### 3. Avatar Upload & Management
**Status**: âŒ Not Started | **Priority**: MEDIUM | **Time**: 10h | **Dependencies**: 2

**Key Files**: `AvatarUploadScreen.kt` (new), `ImageCropScreen.kt` (new), `AvatarViewModel.kt` (new)

**Subtasks**: Upload UI, Image Processing, Storage Integration, Preview & Crop, Error Handling, Performance Testing

---

### Input: "Payment System"
**Auto-Expands To:**
- **Payment Method Management**
  - 1.1 Payment Methods UI
  - 1.2 Card Validation Logic
  - 1.3 Secure Storage Integration
  - 1.4 Payment Gateway Connection
  - 1.5 Error & Security Handling
  - 1.6 PCI Compliance Testing
- **Transaction Processing**
  - 2.1 Transaction Flow UI
  - 2.2 Payment Processing Logic
  - 2.3 Gateway Integration
  - 2.4 Status Tracking
  - 2.5 Failure Recovery
  - 2.6 Load Testing
- **Subscription Management**
  - 3.1 Subscription Plans UI
  - 3.2 Billing Cycle Logic
  - 3.3 Recurring Payment Integration
  - 3.4 Plan Upgrade/Downgrade
  - 3.5 Cancellation Handling
  - 3.6 Revenue Analytics

### Input: "Search Feature"
**Auto-Expands To:**
- **Basic Search Implementation**
  - 1.1 Search Bar UI Design
  - 1.2 Query Processing Logic
  - 1.3 Search API Integration
  - 1.4 Results Display
  - 1.5 No Results Handling
  - 1.6 Performance Testing
- **Advanced Filters**
  - 2.1 Filter UI Components
  - 2.2 Filter Logic Implementation
  - 2.3 Query Builder Integration
  - 2.4 Filter Persistence
  - 2.5 Complex Query Handling
  - 2.6 Filter Analytics
- **Auto-suggestions**
  - 3.1 Suggestion UI Component
  - 3.2 Autocomplete Logic
  - 3.3 Search History Integration
  - 3.4 Popular Queries
  - 3.5 Typo Correction
  - 3.6 Suggestion Performance

## Task Categories & Modules

### ğŸ—ï¸ Foundation Module
- Data models vÃ  database setup
- Core architecture components
- Base classes vÃ  utilities
- Configuration management

### ğŸ¨ UI/UX Module
- Screen designs vÃ  layouts
- Component library
- Navigation flow
- Responsive design
- Accessibility features

### ğŸ”§ Backend Module
- API endpoints
- Business logic
- Data validation
- Authentication/Authorization
- Background services

### ğŸ§ª Testing Module
- Unit tests
- Integration tests
- UI tests
- Performance tests
- Security tests

### ğŸ“± Platform Module
- Platform-specific implementations
- Native integrations
- Performance optimizations
- Platform guidelines compliance

### ğŸ”’ Security Module
- Data encryption
- Secure communication
- Access controls
- Audit logging
- Compliance requirements

### ğŸ“Š Analytics Module
- User behavior tracking
- Performance monitoring
- Error reporting
- Business metrics
- A/B testing

### ğŸš€ DevOps Module
- CI/CD pipeline
- Deployment automation
- Monitoring setup
- Backup strategies
- Disaster recovery

## Enhanced Quality Gates

### Professional Task Creation Standards
- **Báº®T BUá»˜C** má»—i task pháº£i cÃ³ Ä‘Ãºng 6 subtasks theo thá»© tá»±: UIâ†’Logicâ†’Dataâ†’APIâ†’Errorâ†’Testing
- **Báº®T BUá»˜C** má»—i task pháº£i cÃ³ Ã­t nháº¥t 10 acceptance criteria chi tiáº¿t vÃ  Ä‘o lÆ°á»ng Ä‘Æ°á»£c
- **Báº®T BUá»˜C** má»—i task pháº£i cÃ³ 4 pháº§n technical requirements: UI/UX, API, Data, Testing
- **Báº®T BUá»˜C** má»—i subtask pháº£i cÃ³ mÃ´ táº£ chi tiáº¿t vá» má»¥c tiÃªu cá»¥ thá»ƒ
- **Báº®T BUá»˜C** acceptance criteria pháº£i cover Ä‘áº§y Ä‘á»§: functionality, performance, security, accessibility
- **Báº®T BUá»˜C** technical requirements pháº£i mÃ´ táº£ specifications mÃ  KHÃ”NG chá»©a implementation code
- **Báº®T BUá»˜C** task description pháº£i bao gá»“m business context vÃ  technical overview

### Content Quality Standards
- **Báº®T BUá»˜C** má»—i task pháº£i self-contained vÃ  actionable cho developer
- **Báº®T BUá»˜C** subtasks pháº£i theo progressive complexity tá»« Ä‘Æ¡n giáº£n Ä‘áº¿n phá»©c táº¡p
- **Báº®T BUá»˜C** acceptance criteria pháº£i specific, measurable, achievable, relevant, time-bound
- **Báº®T BUá»˜C** technical requirements pháº£i Ä‘á»§ chi tiáº¿t Ä‘á»ƒ developer hiá»ƒu rÃµ expectations
- **Báº®T BUá»˜C** error handling vÃ  edge cases pháº£i Ä‘Æ°á»£c address explicitly
- **Báº®T BUá»˜C** performance vÃ  security considerations pháº£i Ä‘Æ°á»£c include

### Integration & Consistency Validation
- **Báº®T BUá»˜C** check dependencies vá»›i existing tasks vÃ  avoid conflicts
- **Báº®T BUá»˜C** validate task ordering vÃ  logical flow
- **Báº®T BUá»˜C** ensure no duplicate functionality across tasks
- **Báº®T BUá»˜C** maintain consistency vá»›i project architecture vÃ  coding standards
- **Báº®T BUá»˜C** verify completeness cá»§a feature implementation across all tasks
- **Báº®T BUá»˜C** ensure proper module organization vÃ  separation of concerns

## Execution Commands

### Automatic Task Creation
```
kiro:create-tasks [feature-description]
- Tá»± Ä‘á»™ng táº¡o comprehensive task list
- Apply auto-expansion rules
- Generate Kiro-compliant format
- Integrate vá»›i existing tasks
```

### Manual Task Enhancement
```
kiro:enhance-task [task-id]
- Expand existing task vá»›i additional details
- Add missing acceptance criteria
- Update technical specifications
- Validate completeness
```

### Task Validation
```
kiro:validate-tasks
- Check task format compliance
- Validate dependencies
- Ensure completeness
- Generate quality report
```

## Integration vá»›i IDE Systems

### Claude Integration
- Sá»­ dá»¥ng conversation context Ä‘á»ƒ hiá»ƒu feature requirements
- Generate tasks trong Claude conversation
- Export tasks to .kiro/specs/{project}/tasks.md
- Maintain task traceability

### Cursor Integration
- Integrate vá»›i Cursor's codebase understanding
- Generate tasks based on existing code structure
- Suggest refactoring tasks
- Auto-update task status based on code changes

### Trae AI Integration
- Leverage Trae's project analysis capabilities
- Generate context-aware tasks
- Integrate vá»›i Trae's planning workflows
- Use Trae's code intelligence for task estimation

## Critical Professional Task Creation Rules

### Core Creation Principles
1. **KHÃ”NG BAO GIá»œ** há»i clarification - Ä‘Æ°a ra reasonable assumptions dá»±a trÃªn best practices
2. **LUÃ”N LUÃ”N** táº¡o comprehensive, professional-grade tasks ngay cáº£ tá»« minimal input
3. **Báº®T BUá»˜C** má»—i task pháº£i cÃ³ Ä‘Ãºng 6 subtasks theo thá»© tá»± chuáº©n: UIâ†’Logicâ†’Dataâ†’APIâ†’Errorâ†’Testing
4. **Báº®T BUá»˜C** má»—i task pháº£i cÃ³ Ã­t nháº¥t 10 acceptance criteria chi tiáº¿t vÃ  measurable
5. **Báº®T BUá»˜C** technical requirements pháº£i comprehensive nhÆ°ng KHÃ”NG chá»©a implementation code

### Quality & Completeness Standards
6. **Báº®T BUá»˜C** include táº¥t cáº£ edge cases, error scenarios, vÃ  security considerations
7. **Báº®T BUá»˜C** output pháº£i Ä‘á»§ chi tiáº¿t Ä‘á»ƒ developer cÃ³ thá»ƒ báº¯t Ä‘áº§u coding ngay láº­p tá»©c
8. **Æ¯U TIÃŠN** professional completeness vÃ  actionable details hÆ¡n brevity
9. **Báº®T BUá»˜C** má»—i subtask pháº£i cÃ³ clear, specific objective vÃ  deliverable
10. **Báº®T BUá»˜C** acceptance criteria pháº£i cover functionality, performance, security, accessibility

### Integration & Consistency Requirements
11. **Báº®T BUá»˜C** tuÃ¢n thá»§ Enhanced Professional Task Format standards
12. **Báº®T BUá»˜C** integrate seamlessly vá»›i existing project structure vÃ  architecture
13. **Báº®T BUá»˜C** maintain logical task dependencies vÃ  progressive complexity ordering
14. **Báº®T BUá»˜C** ensure no duplicate functionality vÃ  maintain separation of concerns
15. **Báº®T BUá»˜C** verify completeness cá»§a entire feature implementation across all generated tasks

## Professional Success Criteria

### Developer Readiness Standard
Má»™t developer pháº£i cÃ³ thá»ƒ báº¯t Ä‘áº§u coding ngay láº­p tá»©c sau khi Ä‘á»c task output, vá»›i Ä‘áº§y Ä‘á»§ thÃ´ng tin vá»:
- **What to build**: Clear functional requirements vÃ  expected outcomes
- **How to build**: Technical specifications vÃ  implementation approach
- **How to validate**: Comprehensive acceptance criteria vÃ  testing requirements
- **How to integrate**: Dependencies, APIs, vÃ  integration points

### Quality Benchmarks
- **Completeness**: 100% coverage cá»§a feature requirements across all tasks
- **Actionability**: Má»—i task vÃ  subtask cÃ³ clear deliverables vÃ  success metrics
- **Professional Standard**: Tasks comparable vá»›i enterprise-level project management
- **Technical Depth**: Sufficient detail Ä‘á»ƒ avoid implementation ambiguity
- **Integration Ready**: Seamless fit vá»›i existing codebase vÃ  architecture

## Example Usage

### Input
```
"TÃ´i muá»‘n thÃªm tÃ­nh nÄƒng chat cho á»©ng dá»¥ng"
```

### Output
```markdown
## ğŸ’¬ CHAT SYSTEM - Comprehensive Implementation Tasks

### ğŸ—ï¸ MODULE 1: Chat Foundation

#### TASK-001: Chat Data Models & Database
**Status**: âŒ Not Started
**Priority**: High
**Dependencies**: None
**Module**: Chat Foundation

Create comprehensive chat data models supporting real-time messaging, media sharing, and group conversations.

**Subtasks:**
- **1.1 Database Schema Design**: Design Room entities vÃ  relationships
- **1.2 Data Access Layer**: Implement DAOs vá»›i CRUD operations
- **1.3 Model Validation**: Add data validation vÃ  constraints
- **1.4 Migration Scripts**: Create database migration strategies
- **1.5 Encryption Integration**: Implement message encryption support
- **1.6 Testing Suite**: Unit tests cho data layer

**Acceptance Criteria:**
- [ ] Create ChatEntity.kt with Room annotations
- [ ] Create MessageEntity.kt with support for text, image, file, voice
- [ ] Create ChatParticipantEntity.kt for user management
- [ ] Create ChatDao.kt with CRUD operations
- [ ] Update HealthDatabase.kt to include chat entities
- [ ] Add message encryption support
- [ ] Add message status tracking (sent, delivered, read)
- [ ] Add typing indicators support
- [ ] Add message reactions support
- [ ] Add message threading support

**Technical Specifications:**
```kotlin
@Entity(tableName = "chats")
data class ChatEntity(
    @PrimaryKey val id: String,
    val name: String?,
    val type: ChatType, // DIRECT, GROUP
    val createdAt: Long,
    val updatedAt: Long,
    val lastMessageId: String?,
    val isArchived: Boolean = false,
    val isMuted: Boolean = false
)

@Entity(tableName = "messages")
data class MessageEntity(
    @PrimaryKey val id: String,
    val chatId: String,
    val senderId: String,
    val content: String,
    val messageType: MessageType, // TEXT, IMAGE, FILE, VOICE
    val timestamp: Long,
    val status: MessageStatus, // SENDING, SENT, DELIVERED, READ
    val replyToMessageId: String?,
    val isEdited: Boolean = false,
    val isDeleted: Boolean = false,
    val encryptedContent: String?
)
```

**Implementation Guide:**
- Use Room database vá»›i TypeConverters cho complex types
- Implement encryption using Android Keystore
- Follow Repository pattern cho data access
- Add proper indexing cho performance

**Requirements Reference:** Chat System Requirements

#### TASK-002: Real-time Messaging Engine
**Status**: âŒ Not Started
**Priority**: High
**Dependencies**: TASK-001
**Module**: Chat Foundation

**Subtasks:**
- **2.1 WebSocket Connection**: Implement real-time connection management
- **2.2 Message Queue**: Handle message sending/receiving queues
- **2.3 Offline Support**: Implement offline message storage
- **2.4 Sync Mechanism**: Handle message synchronization
- **2.5 Connection Recovery**: Auto-reconnection vÃ  error handling
- **2.6 Performance Testing**: Load testing cho concurrent users

[Continue vá»›i detailed task breakdown...]
```

Workflow nÃ y Ä‘áº£m báº£o ráº±ng má»i feature request Ä‘á»u Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh actionable, comprehensive task list sáºµn sÃ ng cho implementation.

## ğŸ”§ Implementation Notes

- Always validate task completeness before marking as done
- Maintain consistent naming conventions across all tasks
- Ensure proper dependency tracking and resolution
- Regular progress reviews and timeline adjustments
- Quality gates at each phase completion
- Documentation updates with each task completion

## ğŸš¨ Enforcement Rules

### Báº®T BUá»˜C - Mandatory Compliance

1. **Format**: Tasks MUST follow compact format (Status | Priority | Time | Dependencies)
2. **Time**: 4-20 hours per task
3. **Files**: List key files with modification status
4. **Phases**: 3 phases with emoji indicators (ğŸš¨ğŸš€ğŸ¨)
5. **Dependencies**: Reference by task number
6. **Subtasks**: 6 core subtasks minimum
7. **Vietnamese**: Required sections in Vietnamese
8. **Structure**: Project overview + phases + tasks

### Quality Checklist

- [ ] 3 phases with 3-7 tasks each
- [ ] Realistic time estimates
- [ ] Clear dependencies
- [ ] Key files specified
- [ ] Vietnamese compliance

### Non-Compliance

- Incomplete tasks â†’ reject and recreate
- Wrong format â†’ immediate correction
- Missing details â†’ expand following workflow