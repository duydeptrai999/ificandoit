# Gemini IDE Project Rules

> **ðŸ”— MANDATORY RULES SYNCHRONIZATION**  
> **Báº®T BUá»˜C** sá»­ dá»¥ng cÃ¡c rules tá»« `.cursor/rules/` lÃ m nguá»“n chÃ­nh thá»©c cho táº¥t cáº£ workflows trong Gemini IDE.  
> File nÃ y chá»‰ lÃ  alias/link Ä‘áº¿n cÃ¡c rules chÃ­nh thá»©c trong `.cursor/rules/`

## ðŸŽ¯ Primary Rules Sources (MANDATORY)

### Core Development Rules

- **[User Intent Analysis Workflow](./.cursor/rules/user-intent-analysis-workflow.mdc)** - ðŸ”´ Báº®T BUá»˜C: PhÃ¢n tÃ­ch Ã½ Ä‘á»‹nh trÆ°á»›c má»i hÃ nh Ä‘á»™ng
- **[Base Rules](./.cursor/rules/base-rules.mdc)** - Quy táº¯c cÆ¡ báº£n cho táº¥t cáº£ projects
- **[Development Rules](./.cursor/rules/development-rules.mdc)** - Quy táº¯c phÃ¡t triá»ƒn chung
- **[Development Control Rules](./.cursor/rules/development-control-rules.mdc)** - Kiá»ƒm soÃ¡t quy trÃ¬nh phÃ¡t triá»ƒn
- **[File Protection Rules](./.cursor/rules/file-protection-rules.mdc)** - Báº£o vá»‡ vÃ  backup files
- **[File Organization Rules](./.cursor/rules/file-organization-rules.mdc)** - Tá»• chá»©c file vÃ  thÆ° má»¥c

### Mobile Development Workflows

- **[Mobile Utility Workflow](./.cursor/rules/mobile-utility-workflow.mdc)** - Workflow chÃ­nh cho mobile apps
- **[Android Workflow](./.cursor/rules/android-workflow.mdc)** - Quy trÃ¬nh phÃ¡t triá»ƒn Android
- **[iOS Workflow](./.cursor/rules/ios-workflow.mdc)** - Quy trÃ¬nh phÃ¡t triá»ƒn iOS
- **[TDD Mobile Workflow](./.cursor/rules/tdd-mobile-workflow.mdc)** - Test-driven development cho mobile

### Project Management

- **[Planning Workflow](./.cursor/rules/planning-workflow.mdc)** - Quy trÃ¬nh láº­p káº¿ hoáº¡ch
- **[Planning Enforcement](./.cursor/rules/planning-enforcement.mdc)** - Thá»±c thi káº¿ hoáº¡ch
- **[Planning Validation Rules](./.cursor/rules/planning-validation-rules.mdc)** - XÃ¡c thá»±c káº¿ hoáº¡ch
- **[Project Identity Enforcement](./.cursor/rules/project-identity-enforcement.mdc)** - Kiá»ƒm tra Ä‘á»‹nh danh dá»± Ã¡n
- **[Project Stage Manager](./.cursor/rules/project-stage-manager.mdc)** - Quáº£n lÃ½ giai Ä‘oáº¡n dá»± Ã¡n

### Brainstorm & Expert System

- **[Brainstorm Overview](./.cursor/rules/brainstorm-overview.mdc)** - TÃ i liá»‡u tá»•ng quan vá» há»‡ thá»‘ng brainstorm
- **[Brainstorm Workflow](./.cursor/rules/brainstorm-workflow.mdc)** - Quy trÃ¬nh brainstorm cÆ¡ báº£n
- **[Expert Brainstorm Workflow](./.cursor/rules/expert-brainstorm-workflow.mdc)** - Quy trÃ¬nh brainstorm vá»›i cÃ¡c chuyÃªn gia
- **[Brainstorm Expert Integration](./.cursor/rules/brainstorm-expert-integration.mdc)** - TÃ­ch há»£p quy trÃ¬nh brainstorm vá»›i nhiá»u chuyÃªn gia
- **[Expert Brainstorm Guide](./.cursor/rules/expert-brainstorm-guide.mdc)** - HÆ°á»›ng dáº«n thá»±c hiá»‡n brainstorm vá»›i nhiá»u chuyÃªn gia

### Code Quality & Architecture

- **[Android Code Deduplication](./.cursor/rules/android-code-deduplication.mdc)** - TrÃ¡nh trÃ¹ng láº·p code Android
- **[Universal Code Deduplication](./.cursor/rules/universal-code-deduplication.mdc)** - TrÃ¡nh trÃ¹ng láº·p code chung
- **[Android Project Template](./.cursor/rules/android-project-template.mdc)** - Template dá»± Ã¡n Android
- **[iOS Project Template](./.cursor/rules/ios-project-template.mdc)** - Template dá»± Ã¡n iOS
- **[TDD Guidelines](./.cursor/rules/tdd-guidelines.mdc)** - HÆ°á»›ng dáº«n Test-Driven Development

### Integration & API

- **[API Integration Rules](./.cursor/rules/api-integration-rules.mdc)** - Quy táº¯c tÃ­ch há»£p API
- **[Backend Rules](./.cursor/rules/backend-rules-optimized.mdc)** - Quy táº¯c backend
- **[Frontend Rules](./.cursor/rules/frontend-rules.mdc)** - Quy táº¯c frontend
- **[Database Management](./.cursor/rules/database-management.mdc)** - Quáº£n lÃ½ cÆ¡ sá»Ÿ dá»¯ liá»‡u

### Specialized Workflows

- **[Git Workflow](./.cursor/rules/git-workflow.mdc)** - Quy trÃ¬nh Git
- **[i18n Rules](./.cursor/rules/i18n-rules.mdc)** - Quá»‘c táº¿ hÃ³a
- **[Resource Management](./.cursor/rules/resource-management.mdc)** - Quáº£n lÃ½ tÃ i nguyÃªn
- **[Terminal Rules](./.cursor/rules/terminal-rules.mdc)** - Quy táº¯c terminal
- **[Design to Prompt Analysis](./.cursor/rules/design-to-prompt.mdc)** - PhÃ¢n tÃ­ch thiáº¿t káº¿ vÃ  táº¡o prompt cho á»©ng dá»¥ng di Ä‘á»™ng

### Project Setup & Identity

- **[Project Creation Workflow](./.cursor/rules/project-creation-workflow.mdc)** - Táº¡o dá»± Ã¡n má»›i
- **[Project Identity Template](./.cursor/rules/project-identity-template.mdc)** - Template Ä‘á»‹nh danh dá»± Ã¡n
- **[Project Identification Rules](./.cursor/rules/project-identification-rules.mdc)** - Nháº­n diá»‡n dá»± Ã¡n
- **[Tech Stack Selection](./.cursor/rules/tech-stack-selection.mdc)** - Lá»±a chá»n cÃ´ng nghá»‡
- **[Template Selection Workflow](./.cursor/rules/template-selection-workflow.mdc)** - Lá»±a chá»n template

### Advanced Features

- **[Memory Bank Workflow](./.cursor/rules/memory-bank-workflow.mdc)** - Quáº£n lÃ½ bá»™ nhá»›
- **[Experience System Workflow](./.cursor/rules/experience-system-workflow.mdc)** - Há»‡ thá»‘ng kinh nghiá»‡m
- **[Context7 Auto Workflow](./.cursor/rules/context7-auto-workflow.mdc)** - Tá»± Ä‘á»™ng kiá»ƒm tra context dá»± Ã¡n
- **[Four Role Development](./.cursor/rules/four-role-development.mdc)** - PhÃ¡t triá»ƒn 4 vai trÃ²

### Kiro Task Execution System

- **[Kiro Task Execution](./.cursor/rules/kiro-task-execution.mdc)** - ðŸ”´ Báº®T BUá»˜C: Há»‡ thá»‘ng thá»±c thi task tá»± Ä‘á»™ng
- **[Kiro Fallback Workflow](./.cursor/rules/kiro-fallback-workflow.mdc)** - Quy trÃ¬nh dá»± phÃ²ng khi thiáº¿u Kiro files
- **[Kiro System Overview](./.cursor/rules/kiro-system-overview.mdc)** - Tá»•ng quan há»‡ thá»‘ng Kiro
- **[Auto Task Execution](./.cursor/rules/auto-task-execution.mdc)** - Thá»±c thi task tá»± Ä‘á»™ng

## âš ï¸ CRITICAL ENFORCEMENT RULES FOR GEMINI IDE

### Mandatory Compliance

1. **Báº®T BUá»˜C** tuÃ¢n thá»§ 100% cÃ¡c rules trong `.cursor/rules/`
2. **NGHIÃŠM Cáº¤M** táº¡o rules má»›i mÃ  khÃ´ng sync vá»›i `.cursor/rules/`
3. **Báº®T BUá»˜C** sá»­ dá»¥ng relative paths Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh di Ä‘á»™ng
4. **Báº®T BUá»˜C** kiá»ƒm tra `.project-identity` trÆ°á»›c má»i task
5. **ðŸ”´ Báº®T BUá»˜C** sá»­ dá»¥ng Kiro Task Execution System cho má»i project
6. **ðŸ”´ Báº®T BUá»˜C** kÃ­ch hoáº¡t Kiro Fallback Workflow khi thiáº¿u files

### Gemini IDE Specific Configuration

- **Báº®T BUá»˜C** sá»­ dá»¥ng rules tá»« `.cursor/rules/` lÃ m nguá»“n chÃ­nh thá»©c
- File nÃ y chá»‰ chá»©a alias links vÃ  khÃ´ng Ä‘Æ°á»£c chá»©a rules Ä‘á»™c láº­p
- Má»i customization pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n trong `.cursor/rules/`
- TuÃ¢n thá»§ cáº¥u trÃºc project vÃ  workflow Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a

### Synchronization Protocol

- Má»i thay Ä‘á»•i rules pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n trong `.cursor/rules/` trÆ°á»›c
- File nÃ y chá»‰ Ä‘Æ°á»£c cáº­p nháº­t Ä‘á»ƒ sync alias links
- KhÃ´ng Ä‘Æ°á»£c override hoáº·c modify ná»™i dung rules gá»‘c

## ðŸŽ¯ Kiro Task Execution System for Gemini IDE

### Core Features

- **ðŸ”´ MANDATORY**: Automatic task detection tá»« `.kiro/specs/{project}/tasks.md`
- **ðŸ”´ MANDATORY**: Smart execution theo priority vÃ  dependencies
- **ðŸ”´ MANDATORY**: Real-time status tracking (pending, in-progress, completed, failed)
- **ðŸ”´ MANDATORY**: Fallback workflow khi thiáº¿u Kiro files
- **ðŸ”´ MANDATORY**: Quality gates vá»›i acceptance criteria validation

### Kiro Task Detection Algorithm

```bash
# Gemini IDE sáº½ tá»± Ä‘á»™ng kiá»ƒm tra:
1. Kiá»ƒm tra .kiro/specs/{project}/tasks.md
2. Náº¿u thiáº¿u â†’ KÃ­ch hoáº¡t Kiro Fallback Workflow
3. Náº¿u cÃ³ â†’ Parse vÃ  execute tasks theo priority
4. Update status real-time trong Gemini IDE
```

### Fallback Workflow Integration

1. **Brainstorm Stage**: Táº¡o insights tá»« user input
2. **Requirements Stage**: Generate structured requirements.md
3. **Design Stage**: Create technical design.md
4. **Tasks Stage**: Convert design thÃ nh Kiro tasks.md

### Gemini IDE Specific Benefits

- **Seamless Integration**: TÃ­ch há»£p mÆ°á»£t mÃ  vá»›i Gemini IDE workflow
- **Visual Task Tracking**: Hiá»ƒn thá»‹ task progress trong IDE
- **Auto-completion**: Smart suggestions cho Kiro task format
- **Error Prevention**: Validate task format trÆ°á»›c khi execute
- **Dependency Resolution**: Automatic task ordering trong IDE

## ðŸ”„ Rules Hierarchy Priority

1. `.cursor/rules/` - **PRIMARY SOURCE** (Highest Priority)
2. **ðŸ”´ Kiro Task System** - Automatic execution layer (Critical Priority)
3. `.appdexer/rules/` - Secondary reference
4. `.trae/rules/` - Alias/Link layer
5. `GEMINI.md` - Gemini IDE specific alias (Lowest Priority)

## ðŸŽ¯ Core Working Principles for Gemini IDE

### Communication Style

- Sá»­ dá»¥ng tiáº¿ng Viá»‡t cho trÃ² chuyá»‡n vÃ  giáº£i thÃ­ch vá»›i giá»ng Ä‘iá»‡u hÃ i hÆ°á»›c kiá»ƒu giá»›i tráº»
- Tráº£ lá»i rÃµ rÃ ng, Ä‘áº§y Ä‘á»§ nhÆ°ng khÃ´ng dÃ i dÃ²ng
- LuÃ´n há»i lÃ m rÃµ khi yÃªu cáº§u khÃ´ng rÃµ rÃ ng
- ThÃ´ng bÃ¡o khi báº¡n khÃ´ng cháº¯c cháº¯n vá» cÃ¡ch giáº£i quyáº¿t

### Language

- LuÃ´n kiá»ƒm tra vÃ  thÃªm cÃ¡c chuá»—i dá»‹ch hoáº·c resource khi táº¡o
- Sá»­ dá»¥ng tiáº¿ng Anh cho táº¥t cáº£ code vÃ  tÃ i liá»‡u ká»¹ thuáº­t

### Core Working Principles

- **LuÃ´n suy luáº­n yÃªu cáº§u cá»§a ngÆ°á»i dÃ¹ng trÆ°á»›c khi thá»±c hiá»‡n**
- PhÃ¢n tÃ­ch Ã½ Ä‘á»‹nh thá»±c sá»± Ä‘áº±ng sau yÃªu cáº§u
- LuÃ´n kiá»ƒm tra bá»™ nhá»› Ä‘á»ƒ tÃ¬m thÃ´ng tin liÃªn quan
- LuÃ´n phÃ¢n tÃ­ch ká»¹ trÆ°á»›c khi chá»‰nh sá»­a code
- Táº­p trung vÃ o váº¥n Ä‘á» chÃ­nh, khÃ´ng láº¡c Ä‘á»
- XÃ¡c Ä‘á»‹nh rÃµ nguyÃªn nhÃ¢n gá»‘c rá»… (root cause) trÆ°á»›c khi sá»­a lá»—i
- Chá»‰ thá»±c hiá»‡n má»™t thay Ä‘á»•i lá»›n má»—i láº§n vÃ  kiá»ƒm tra ká»¹ trÆ°á»›c khi tiáº¿p tá»¥c

### ðŸ§  User Intent Analysis System (MANDATORY)

#### Core Principles for Gemini IDE

- **ðŸ”´ Báº®T BUá»˜C: PhÃ¢n tÃ­ch Ã½ Ä‘á»‹nh trÆ°á»›c má»i hÃ nh Ä‘á»™ng**
- **ðŸ”´ Báº®T BUá»˜C: KhÃ´ng thá»±c hiá»‡n ngay láº­p tá»©c theo yÃªu cáº§u literal**
- **ðŸ”´ Báº®T BUá»˜C: LuÃ´n tÃ¬m hiá»ƒu má»¥c tiÃªu thá»±c sá»± Ä‘áº±ng sau yÃªu cáº§u**
- **ðŸ”´ Báº®T BUá»˜C: Äá» xuáº¥t giáº£i phÃ¡p tá»‘i Æ°u thay vÃ¬ chá»‰ lÃ m theo yÃªu cáº§u**
- **ðŸ”´ Báº®T BUá»˜C: XÃ¡c nháº­n hiá»ƒu Ä‘Ãºng Ã½ Ä‘á»‹nh trÆ°á»›c khi thá»±c hiá»‡n**

#### 4-Phase Analysis Process

**Phase 1: Request Analysis**

- PhÃ¢n tÃ­ch yÃªu cáº§u chi tiáº¿t
- XÃ¡c Ä‘á»‹nh tá»« khÃ³a vÃ  ngá»¯ cáº£nh quan trá»ng
- PhÃ¡t hiá»‡n cÃ¡c yÃªu cáº§u ngáº§m Ä‘á»‹nh
- ÄÃ¡nh giÃ¡ Ä‘á»™ phá»©c táº¡p vÃ  tÃ¡c Ä‘á»™ng

**Phase 2: Context Gathering**

- Thu tháº­p thÃ´ng tin vá» tráº¡ng thÃ¡i dá»± Ã¡n hiá»‡n táº¡i
- ÄÃ¡nh giÃ¡ má»©c Ä‘á»™ chuyÃªn mÃ´n cá»§a ngÆ°á»i dÃ¹ng
- Kiá»ƒm tra lá»‹ch sá»­ vÃ  patterns trÆ°á»›c Ä‘Ã³
- XÃ¡c Ä‘á»‹nh cÃ¡c rÃ ng buá»™c vÃ  giá»›i háº¡n

**Phase 3: Intent Classification**

- **Feature Request**: ThÃªm tÃ­nh nÄƒng má»›i
- **Bug Fix**: Sá»­a lá»—i hoáº·c váº¥n Ä‘á»
- **Optimization**: Cáº£i thiá»‡n hiá»‡u suáº¥t
- **Refactoring**: TÃ¡i cáº¥u trÃºc code
- **Documentation**: Táº¡o/cáº­p nháº­t tÃ i liá»‡u
- **Learning**: Há»c há»i vÃ  hiá»ƒu biáº¿t
- **Exploration**: KhÃ¡m phÃ¡ vÃ  thá»­ nghiá»‡m

**Phase 4: Solution Generation**

- Táº¡o nhiá»u phÆ°Æ¡ng Ã¡n giáº£i quyáº¿t
- ÄÃ¡nh giÃ¡ Æ°u nhÆ°á»£c Ä‘iá»ƒm cá»§a tá»«ng phÆ°Æ¡ng Ã¡n
- XÃ¡c Ä‘á»‹nh phÆ°Æ¡ng Ã¡n tá»‘i Æ°u
- Chuáº©n bá»‹ presentation cho ngÆ°á»i dÃ¹ng

#### Integration with Gemini IDE Workflows

- **ðŸ”´ Báº®T BUá»˜C**: Sá»­ dá»¥ng [User Intent Analysis Workflow](./.cursor/rules/user-intent-analysis-workflow.mdc)
- **ðŸ”´ Báº®T BUá»˜C**: TÃ­ch há»£p vá»›i Planning Workflow khi cáº§n thiáº¿t
- **ðŸ”´ Báº®T BUá»˜C**: Sá»­ dá»¥ng Context7 Ä‘á»ƒ thu tháº­p thÃ´ng tin ngá»¯ cáº£nh
- **ðŸ”´ Báº®T BUá»˜C**: Cáº­p nháº­t Memory Bank vá»›i patterns thÃ nh cÃ´ng

#### Quality Metrics for Gemini IDE

- **Intent Analysis Accuracy**: Target 95%
- **User Confirmation Rate**: Target 90%
- **Solution Optimality**: Target 85%
- **Rework Reduction**: Target 50%

### Problem Solving

- Ngá»«ng ngay khi gáº·p váº¥n Ä‘á» cáº§n giáº£i quyáº¿t
- KhÃ´ng nháº£y vá»™i vÃ o viá»‡c sá»­a code khi gáº·p lá»—i
- LuÃ´n Ä‘Æ°a ra 2-3 phÆ°Æ¡ng Ã¡n khi giáº£i quyáº¿t váº¥n Ä‘á» phá»©c táº¡p
- Dá»«ng vÃ  xin hÆ°á»›ng dáº«n sau 3 láº§n thá»­ khÃ´ng thÃ nh cÃ´ng

### Quality Standards

- Sá»­ dá»¥ng tiáº¿ng Anh cho táº¥t cáº£ code vÃ  tÃ i liá»‡u ká»¹ thuáº­t
- Viáº¿t code tá»± giáº£i thÃ­ch vá»›i tÃªn biáº¿n/hÃ m rÃµ rÃ ng
- TuÃ¢n thá»§ cÃ¡c nguyÃªn táº¯c SOLID
- Implement xá»­ lÃ½ lá»—i má»™t cÃ¡ch Ä‘Ãºng Ä‘áº¯n

### Documentation

- Ghi láº¡i má»i quyáº¿t Ä‘á»‹nh quan trá»ng vÃ o Decisions.md
- Cáº­p nháº­t Codebase.md má»—i khi hoÃ n thiá»‡n má»™t pháº§n
- ÄÃ¡nh dáº¥u cÃ¡c task Ä‘Ã£ hoÃ n thÃ nh trong Instruction.md
- Káº¿t thÃºc má»—i nhiá»‡m vá»¥ vá»›i mÃ´ táº£ ngáº¯n gá»n vá» cÃ´ng viá»‡c Ä‘Ã£ lÃ m

### Safety Measures

- KhÃ´ng tá»± Ã½ tá»‘i Æ°u code khi khÃ´ng Ä‘Æ°á»£c yÃªu cáº§u
- KhÃ´ng xÃ³a code khÃ´ng liÃªn quan khi khÃ´ng Ä‘Æ°á»£c yÃªu cáº§u
- Cáº©n tháº­n khi xÃ³a file hoáº·c chá»‰nh sá»­a file ngoÃ i nhiá»‡m vá»¥ chÃ­nh
- Táº¡o backup Ä‘Æ¡n giáº£n trÆ°á»›c nhá»¯ng thay Ä‘á»•i lá»›n

## ðŸ“± Android Development Workflow

### Blueprint-First Development

- **Báº®T BUá»˜C** táº¡o blueprint trÆ°á»›c khi viáº¿t code cho má»—i tÃ­nh nÄƒng
- **Báº®T BUá»˜C** kiá»ƒm tra module registry Ä‘á»ƒ trÃ¡nh trÃ¹ng láº·p
- **Báº®T BUá»˜C** cáº­p nháº­t module registry sau khi hoÃ n thÃ nh tÃ­nh nÄƒng
- **Báº®T BUá»˜C** tuÃ¢n thá»§ cáº¥u trÃºc package tiÃªu chuáº©n
- **Báº®T BUá»˜C** sá»­ dá»¥ng cÃ¡c base classes Ä‘Ã£ cÃ³
- **NGHIÃŠM Cáº¤M** táº¡o code trÃ¹ng láº·p chá»©c nÄƒng Ä‘Ã£ cÃ³

### Standard Package Structure

```
com.base.app/
â”œâ”€â”€ base/                 # Base classes
â”‚   â”œâ”€â”€ activity/         # Base Activities
â”‚   â”œâ”€â”€ fragment/         # Base Fragments
â”‚   â”œâ”€â”€ viewmodel/        # Base ViewModels
â”‚   â”œâ”€â”€ adapter/          # Base Adapters
â”‚   â””â”€â”€ view/             # Base Custom Views
â”œâ”€â”€ core/                 # Core modules
â”‚   â”œâ”€â”€ di/               # Dependency Injection
â”‚   â”œâ”€â”€ network/          # Network components
â”‚   â”œâ”€â”€ storage/          # Local storage
â”‚   â”œâ”€â”€ analytics/        # Analytics tracking
â”‚   â””â”€â”€ utils/            # Utility classes
â”œâ”€â”€ data/                 # Data layer
â”‚   â”œâ”€â”€ repository/       # Repositories implementation
â”‚   â”œâ”€â”€ datasource/       # Data sources (remote, local)
â”‚   â”œâ”€â”€ model/            # Data models (entities, DTOs)
â”‚   â””â”€â”€ mapper/           # Mappers
â”œâ”€â”€ domain/               # Domain layer
â”‚   â”œâ”€â”€ usecase/          # Use cases (business logic)
â”‚   â”œâ”€â”€ model/            # Domain models
â”‚   â””â”€â”€ repository/       # Repository interfaces
â””â”€â”€ ui/                   # UI layer
    â”œâ”€â”€ components/       # Shared UI components
    â””â”€â”€ features/         # Feature packages
        â”œâ”€â”€ feature1/     # TÃ­nh nÄƒng 1
        â”œâ”€â”€ feature2/     # TÃ­nh nÄƒng 2
        â””â”€â”€ ...
```

## ðŸ”§ Code Quality Standards

### Architecture

- PhÃ¢n chia rÃµ rÃ ng cÃ¡c layer (presentation, business logic, data)
- Sá»­ dá»¥ng dependency injection Ä‘á»ƒ tÃ¡ch báº¡ch cÃ¡c thÃ nh pháº§n
- Æ¯u tiÃªn composition over inheritance
- Thiáº¿t káº¿ API dá»… sá»­ dá»¥ng vÃ  má»Ÿ rá»™ng
- Ãp dá»¥ng Domain-Driven Design cho dá»± Ã¡n phá»©c táº¡p

### Security

- Validate táº¥t cáº£ input tá»« ngÆ°á»i dÃ¹ng
- Sá»­ dá»¥ng parameterized queries Ä‘á»ƒ trÃ¡nh SQL injection
- MÃ£ hoÃ¡ dá»¯ liá»‡u nháº¡y cáº£m (passwords, tokens, PII)
- Implement Ä‘Ãºng cÃ¡ch cÃ¡c authentication vÃ  authorization
- TuÃ¢n thá»§ hÆ°á»›ng dáº«n OWASP top 10
- Sá»­ dá»¥ng HTTPS cho má»i API endpoints

### Performance

- Tá»‘i Æ°u database queries Ä‘á»ƒ trÃ¡nh N+1 problems
- Implement caching cho dá»¯ liá»‡u tÄ©nh vÃ  truy váº¥n Ä‘áº¯t
- TrÃ¡nh blocking operations trong event loop
- Sá»­ dá»¥ng pagination cho large data sets
- Lazy load components vÃ  modules khi cÃ³ thá»ƒ
- Profiling code Ä‘á»ƒ phÃ¡t hiá»‡n bottlenecks

### Error Handling

- Xá»­ lÃ½ táº¥t cáº£ exceptions vÃ  errors
- Cung cáº¥p error messages há»¯u Ã­ch nhÆ°ng an toÃ n
- Log errors Ä‘Ãºng cÃ¡ch vá»›i context Ä‘á»§ Ä‘á»ƒ debug
- Implement retry mechanisms cho unstable operations
- Sá»­ dá»¥ng circuit breakers cho external services

### Testing

- Viáº¿t unit tests vá»›i test coverage cao
- Implement integration tests cho critical flows
- Sá»­ dá»¥ng mocking Ä‘á»ƒ tÃ¡ch biá»‡t dependencies
- Æ¯u tiÃªn testing pyramids (nhiá»u unit tests, Ã­t e2e tests)

## ðŸ›¡ï¸ File Protection & Backup Rules

### Basic Principles

- **Báº®T BUá»˜C** táº¡o backup trÆ°á»›c khi xÃ³a báº¥t ká»³ file hoáº·c thÆ° má»¥c nÃ o
- **Báº®T BUá»˜C** di chuyá»ƒn file vÃ o thÆ° má»¥c backup thay vÃ¬ xÃ³a trá»±c tiáº¿p
- **Báº®T BUá»˜C** giá»¯ cáº¥u trÃºc thÆ° má»¥c khi backup Ä‘á»ƒ dá»… dÃ ng phá»¥c há»“i sau nÃ y
- **Báº®T BUá»˜C** ghi log má»—i khi di chuyá»ƒn file vÃ o backup
- **KHUYáº¾N NGHá»Š** kiá»ƒm tra file trÆ°á»›c khi xÃ³a Ä‘á»ƒ Ä‘áº£m báº£o khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n chá»©c nÄƒng hiá»‡n cÃ³

### Backup Directory Structure

- Táº¡o thÆ° má»¥c `_backups` trong root cá»§a dá»± Ã¡n (Ä‘Ã£ thÃªm vÃ o .gitignore)
- BÃªn trong táº¡o cáº¥u trÃºc theo dáº¡ng ngÃ y: `_backups/YYYY-MM-DD/`
- Trong má»—i thÆ° má»¥c ngÃ y, duy trÃ¬ cáº¥u trÃºc thÆ° má»¥c gá»‘c Ä‘á»ƒ dá»… dÃ ng phá»¥c há»“i
- VÃ­ dá»¥: `src/components/Button.js` â†’ `_backups/2024-05-10/src/components/Button.js`

## ðŸ“Š Mockup Data Management

### Requirements

- Náº¿u dá»± Ã¡n sá»­ dá»¥ng báº¥t ká»³ dá»¯ liá»‡u giáº£ láº­p nÃ o, **Báº®T BUá»˜C** táº¡o file MockupData.md
- Liá»‡t kÃª chi tiáº¿t vÃ  cáº­p nháº­t thÆ°á»ng xuyÃªn táº¥t cáº£ cÃ¡c pháº§n cá»§a dá»± Ã¡n Ä‘ang sá»­ dá»¥ng dá»¯ liá»‡u giáº£
- PhÃ¢n loáº¡i dá»¯ liá»‡u giáº£ láº­p theo má»¥c Ä‘Ã­ch sá»­ dá»¥ng:
  - Dá»¯ liá»‡u demo cho client/stakeholders
  - Dá»¯ liá»‡u testing cho quÃ¡ trÃ¬nh phÃ¡t triá»ƒn
  - Dá»¯ liá»‡u thay tháº¿ táº¡m thá»i cho API chÆ°a sáºµn sÃ ng
  - Dá»¯ liá»‡u máº«u cho hÆ°á»›ng dáº«n/documentation

### Documentation Format

- Cho má»—i pháº§n dá»¯ liá»‡u giáº£ láº­p, ghi rÃµ:
  - Vá»‹ trÃ­ chÃ­nh xÃ¡c cá»§a file/code Ä‘ang sá»­ dá»¥ng dá»¯ liá»‡u giáº£
  - Cáº¥u trÃºc dá»¯ liá»‡u cá»§a mockup vÃ  cáº¥u trÃºc dá»¯ liá»‡u tháº­t tÆ°Æ¡ng á»©ng
  - PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o vÃ  sá»­ dá»¥ng dá»¯ liá»‡u giáº£
  - Káº¿ hoáº¡ch vÃ  timeline Ä‘á»ƒ chuyá»ƒn sang dá»¯ liá»‡u tháº­t
  - NgÆ°á»i chá»‹u trÃ¡ch nhiá»‡m cho viá»‡c thay tháº¿ dá»¯ liá»‡u giáº£

## ðŸ“‹ Project Information

### Project Identity

- LuÃ´n kiá»ƒm tra .project-identity Ä‘á»ƒ biáº¿t cáº¥u trÃºc vÃ  ngÃ´n ngá»¯ dá»± Ã¡n
- Náº¿u chÆ°a cÃ³ file .project-identity hÃ£y táº¡o vÃ  yÃªu cáº§u ngÆ°á»i dÃ¹ng bá»• sung thÃªm thÃ´ng tin

### Task Status Legend

- âœ… Completed
- â³ In Progress
- âŒ Not Started

## ðŸ”€ Git Workflow

### Commit Convention

- TuÃ¢n thá»§ quy Æ°á»›c commit (feat, fix, docs, style, refactor...)
- Sá»­ dá»¥ng tiáº¿ng Anh cho commit messages
- Format: `type(scope): description`
- Examples:
  - `feat(camera): add new filter effects`
  - `fix(ui): resolve layout issue in preview`
  - `docs(readme): update installation guide`

### Branch Management

- Sá»­ dá»¥ng feature branches cho má»—i tÃ­nh nÄƒng má»›i
- Merge vÃ o main branch sau khi review
- XÃ³a feature branches sau khi merge thÃ nh cÃ´ng

## ðŸŒ Internationalization (i18n)

### String Resources

- LuÃ´n kiá»ƒm tra vÃ  thÃªm cÃ¡c chuá»—i dá»‹ch hoáº·c resource khi táº¡o
- Sá»­ dá»¥ng tiáº¿ng Anh lÃ m ngÃ´n ngá»¯ máº·c Ä‘á»‹nh
- Há»— trá»£ Ä‘a ngÃ´n ngá»¯ vá»›i tiáº¿ng Anh lÃ m fallback
- Táº¡o string keys cÃ³ Ã½ nghÄ©a vÃ  dá»… hiá»ƒu

### Resource Management

- Tá»• chá»©c strings theo feature hoáº·c screen
- Sá»­ dá»¥ng plurals cho cÃ¡c string cÃ³ sá»‘ lÆ°á»£ng
- Implement proper formatting cho dates, numbers, currencies

---

## ðŸ”§ Kiro System Commands for Gemini IDE

### Project Analysis Commands

```bash
# Kiá»ƒm tra Kiro system status
ls -la .kiro/specs/*/
cat .kiro/specs/{project}/tasks.md
cat .kiro/specs/{project}/requirements.md
cat .kiro/specs/{project}/design.md

# Validate Kiro task format
grep -E "^## TASK-[0-9]+:" .kiro/specs/{project}/tasks.md
grep -E "\*\*Status\*\*:" .kiro/specs/{project}/tasks.md
```

### Kiro Task Management

```bash
# Check task dependencies
grep -A 5 "Dependencies:" .kiro/specs/{project}/tasks.md

# Monitor task progress
grep -E "Status.*completed" .kiro/specs/{project}/tasks.md
grep -E "Status.*pending" .kiro/specs/{project}/tasks.md

# Validate acceptance criteria
grep -A 10 "Acceptance Criteria" .kiro/specs/{project}/tasks.md
```

## ðŸš€ Getting Started with Gemini IDE

1. **ðŸ”´ MANDATORY: Kiá»ƒm tra Kiro system** trÆ°á»›c má»i task
2. **Äá»c .project-identity** Ä‘á»ƒ hiá»ƒu context dá»± Ã¡n
3. **Load appropriate workflow rules** tá»« `.cursor/rules/`
4. **KÃ­ch hoáº¡t Kiro Fallback** náº¿u thiáº¿u files
5. **TuÃ¢n thá»§ file organization** vÃ  documentation standards
6. **Sá»­ dá»¥ng backup protocols** khi thay Ä‘á»•i files
7. **Execute Kiro tasks** theo priority vÃ  dependencies

---

_File nÃ y Ä‘Æ°á»£c táº¡o Ä‘á»ƒ há»— trá»£ Gemini IDE sá»­ dá»¥ng cursor rules má»™t cÃ¡ch hiá»‡u quáº£. Má»i thay Ä‘á»•i rules pháº£i Ä‘Æ°á»£c thá»±c hiá»‡n trong `.cursor/rules/` trÆ°á»›c._

# Gemini AI - Mandatory Code Quality Enforcement

## ðŸŽ¯ GOOGLE GEMINI COMPLIANCE DIRECTIVE

**_NGHIÃŠM Cáº¤M_** bá» qua quy trÃ¬nh code quality nÃ y trong báº¥t ká»³ trÆ°á»ng há»£p nÃ o. Táº¥t cáº£ Gemini responses pháº£i tuÃ¢n thá»§ 100% workflow nÃ y.

## ðŸ”— Core Rule Integration Requirements

**_Báº®T BUá»˜C_** Gemini AI pháº£i reference vÃ  enforce cÃ¡c rules sau:

### Primary Code Quality Rules (MANDATORY)

- **[AI Code Quality Automation](.cursor/rules/ai-code-quality-automation.mdc)** - Manual workflow automation
- **[AI Manual Code Review Process](.cursor/rules/ai-manual-code-review-process.mdc)** - Review protocols
- **[AI Execution Templates](.cursor/rules/ai-execution-templates.mdc)** - Execution templates

### Gemini-Specific Integration (REQUIRED)

- **ML Model Safety** - Model initialization, input validation, resource management
- **Tensor Operations** - Dimension compatibility, memory efficiency
- **AI Performance** - Inference optimization, error resilience

## ðŸ¤– Gemini-Specific Quality Enforcement

### MANDATORY Pre-Response Analysis

```markdown
**_Báº®T BUá»˜C_** execute before EVERY ML/AI code generation:

â˜ 1. ML CONTEXT ANALYSIS (20 seconds max)

- Identify ML framework (TensorFlow, PyTorch, etc.)
- Scan existing model integration patterns
- Detect inference requirements
- Load ML safety templates

â˜ 2. MODEL SAFETY PREPARATION (15 seconds max)

- Model initialization safety review
- Input validation template preparation
- Resource management setup
- Error handling pattern activation

â˜ 3. CONFIDENCE THRESHOLD CONFIGURATION (5 seconds max)

- Model initialization fixes: 85% confidence
- Input validation fixes: 90% confidence
- Resource cleanup fixes: 85% confidence
- Performance optimization: 60% confidence
```

### MANDATORY Real-Time ML Code Validation

```markdown
**_Báº®T BUá»˜C_** apply during EVERY ML code generation:

â˜ 1. MODEL INITIALIZATION SAFETY (Real-time)

- Detect model loading â†’ Auto-add error handling
- Detect configuration â†’ Validate parameters
- Detect resource allocation â†’ Add cleanup procedures
- Confidence threshold: 85%+

â˜ 2. INPUT VALIDATION ENFORCEMENT (Real-time)

- Detect model input â†’ Auto-add validation checks
- Detect tensor operations â†’ Validate dimensions
- Detect data processing â†’ Add type checking
- Confidence threshold: 90%+

â˜ 3. RESOURCE MANAGEMENT VALIDATION (Real-time)

- Detect GPU usage â†’ Add proper cleanup
- Detect memory allocation â†’ Validate limits
- Detect model disposal â†’ Ensure proper cleanup
- Confidence threshold: 85%+
```

### MANDATORY Post-ML Code Quality Assurance

```markdown
**_Báº®T BUá»˜C_** execute after EVERY ML code completion:

â˜ 1. MODEL LIFECYCLE VALIDATION (25 seconds max)

- Verify proper model initialization
- Confirm input validation coverage
- Validate error handling completeness
- Check resource cleanup procedures

â˜ 2. PERFORMANCE OPTIMIZATION CHECK (20 seconds max)

- Scan for inference inefficiencies
- Validate batch processing usage
- Check for memory leaks
- Verify concurrent operation safety

â˜ 3. ML SECURITY VALIDATION (15 seconds max)

- Scan for model file exposure
- Verify input sanitization
- Check for data privacy compliance
- Validate inference result safety
```

## ðŸš¨ Gemini Critical Enforcement Rules

### Zero Tolerance Issues (BLOCK RESPONSE)

```markdown
**_NGHIÃŠM Cáº¤M_** provide ML code with:

âŒ Unsafe model initialization (no error handling)
âŒ Missing input validation for model calls
âŒ Unmanaged resource allocation
âŒ Exposed model files or weights
âŒ Memory leaks in inference operations

ACTION: Must auto-fix with 85%+ confidence or REFUSE to generate code
```

### High Priority Issues (FIX BEFORE RESPONSE)

```markdown
**_Báº®T BUá»˜C_** resolve before providing ML code:

âš ï¸ Inefficient inference patterns
âš ï¸ Missing batch processing optimizations
âš ï¸ Incomplete error handling in ML operations
âš ï¸ Suboptimal memory usage patterns
âš ï¸ Missing model performance monitoring

ACTION: Auto-fix with 80%+ confidence or FLAG with explanation
```

## ðŸ“Š Gemini Quality Metrics & Monitoring

### ML Integration Metrics (MANDATORY)

```markdown
âœ… Model initialization safety: > 90%
âœ… Input validation coverage: > 95%
âœ… Resource cleanup compliance: > 85%
âœ… Error handling coverage: > 90%
âœ… Performance optimization rate: > 80%
```

### Performance Requirements

```markdown
ðŸ“ˆ ML code generation time: < 45 seconds
ðŸ“ˆ Quality check execution time: < 60 seconds
ðŸ“ˆ Auto-fix application rate: > 85%
ðŸ“ˆ False positive rate: < 5%
ðŸ“ˆ ML safety issue detection: > 90%
```

### Gemini-Specific Compliance Tracking

```markdown
ðŸ¤– Model safety pattern application: > 90%
ðŸ¤– Input validation robustness: > 95%
ðŸ¤– Resource management effectiveness: > 85%
ðŸ¤– Performance optimization rate: > 80%
ðŸ¤– ML security compliance: > 95%
```

## ðŸ”„ Gemini Quality Monitoring System

### Real-Time ML Quality Gates

```json
{
  "ml_quality_gates": {
    "model_safety_check": {
      "enabled": true,
      "strictness": "high",
      "auto_fix": true,
      "confidence_threshold": 0.85
    },
    "input_validation_enforcement": {
      "enabled": true,
      "strictness": "very_high",
      "auto_fix": true,
      "confidence_threshold": 0.9
    },
    "resource_management_validation": {
      "enabled": true,
      "strictness": "high",
      "auto_fix": true,
      "confidence_threshold": 0.85
    },
    "performance_optimization": {
      "enabled": true,
      "strictness": "medium",
      "auto_fix": false,
      "suggest_improvements": true
    }
  }
}
```

### ML-Specific Escalation Matrix

```yaml
gemini_escalation_procedures:
  model_safety_violations:
    action: "block_code_generation"
    notification: "immediate_safety_flag"
    manual_intervention: "required"

  resource_management_issues:
    action: "auto_fix_with_validation"
    fallback: "provide_safe_alternatives"
    monitoring: "resource_usage_tracking"

  performance_inefficiencies:
    action: "suggest_optimizations"
    documentation: "include_performance_guidance"
    follow_up: "provide_benchmarking_tips"
```

## ðŸŽ¯ Gemini ML Integration Templates

### Model Initialization Safety Templates

```python
# GEMINI AUTO-FIX: Safe Model Initialization
# BEFORE (UNSAFE):
model = GenerativeModel('gemini-pro')
response = model.generate_content(prompt)

# AFTER (SAFE - Auto-applied):
try:
    model = GenerativeModel('gemini-pro')

    # Validate model initialization
    if not model:
        raise ValueError("Failed to initialize Gemini model")

    # Add generation configuration for better control
    generation_config = GenerationConfig(
        temperature=0.7,
        top_p=0.8,
        top_k=40,
        max_output_tokens=1024,
    )

    response = model.generate_content(
        prompt,
        generation_config=generation_config
    )

    return response
except Exception as error:
    print(f"Model initialization failed: {error}")
    raise error
```

### Input Validation Templates

```python
# GEMINI AUTO-FIX: Input Validation Safety
# BEFORE (UNSAFE):
def process_with_ai(user_input):
    result = model.generate_content(user_input)
    return result.text

# AFTER (SAFE - Auto-applied):
def process_with_ai(user_input):
    try:
        # Input validation
        if not user_input or not isinstance(user_input, str):
            raise ValueError("Invalid input: must be non-empty string")

        # Length validation
        if len(user_input) > 10000:
            raise ValueError("Input too long: maximum 10,000 characters")

        # Content safety check (basic)
        if any(unsafe_pattern in user_input.lower() for unsafe_pattern in ['<script>', 'javascript:', 'data:']):
            raise ValueError("Potentially unsafe input detected")

        result = model.generate_content(user_input)

        # Validate response
        if not result or not result.text:
            raise ValueError("No valid response generated")

        return result.text
    except Exception as error:
        print(f"AI processing failed: {error}")
        return "Sorry, I couldn't process your request safely."
```

### Resource Management Templates

```python
# GEMINI AUTO-FIX: Resource Management
# BEFORE (RISKY):
def batch_process_data(data_list):
    results = []
    for data in data_list:
        result = model.generate_content(data)
        results.append(result.text)
    return results

# AFTER (SAFE - Auto-applied):
import time
from typing import List, Optional

def batch_process_data(data_list: List[str]) -> List[str]:
    results = []
    processed_count = 0

    try:
        for i, data in enumerate(data_list):
            try:
                # Input validation for each item
                if not data or len(data.strip()) == 0:
                    results.append("Empty input skipped")
                    continue

                # Rate limiting to prevent API overload
                if i > 0 and i % 10 == 0:
                    time.sleep(1)  # Brief pause every 10 requests

                result = model.generate_content(data)

                if result and result.text:
                    results.append(result.text)
                    processed_count += 1
                else:
                    results.append("No response generated")

            except Exception as item_error:
                print(f"Error processing item {i}: {item_error}")
                results.append(f"Error: {str(item_error)}")

        print(f"Successfully processed {processed_count}/{len(data_list)} items")
        return results

    except Exception as batch_error:
        print(f"Batch processing failed: {batch_error}")
        return [f"Batch error: {str(batch_error)}"] * len(data_list)
```

## ðŸš€ Gemini Implementation Guidelines

### ML Code Generation Protocol

```markdown
1. **PRE-ANALYSIS** (MANDATORY)

   - Execute ML safety workflow analysis
   - Load appropriate ML safety templates
   - Configure ML-specific confidence thresholds

2. **ML CODE GENERATION** (WITH REAL-TIME VALIDATION)

   - Apply safety patterns for model operations
   - Ensure input validation for all ML calls
   - Include appropriate resource management

3. **POST-VALIDATION** (MANDATORY)

   - Final ML safety and performance scan
   - Resource usage compliance verification
   - User education on ML best practices

4. **RESPONSE DELIVERY** (ENHANCED)
   - Include ML quality assurance summary
   - Highlight applied safety improvements
   - Provide ML performance optimization guidance
```

### ML-Specific User Education

```markdown
Gemini responses MUST include:

ðŸ§  **ML Safety Improvements Applied:**

- [List of ML safety auto-fixes applied]
- [Reasoning for model safety enhancements]
- [Resource management optimizations]

âš¡ **Performance Optimizations:**

- [Inference efficiency improvements]
- [Memory usage optimizations]
- [Batch processing recommendations]

ðŸ”’ **Security Considerations:**

- [Model security best practices]
- [Input validation importance]
- [Data privacy compliance notes]
```

## ðŸ“ˆ Continuous ML Improvement Framework

### ML-Specific Learning Mechanisms

```yaml
gemini_ml_learning_system:
  model_pattern_recognition:
    - successful_ml_patterns: "continuously_updated"
    - performance_optimization_tracking: "metrics_based"
    - safety_violation_prevention: "proactive"

  inference_optimization:
    - efficiency_pattern_detection: "performance_monitoring"
    - resource_usage_optimization: "automatic_tuning"
    - batch_processing_enhancement: "throughput_analysis"

  safety_enhancement:
    - ml_vulnerability_updates: "security_research_integration"
    - model_safety_evolution: "continuous_assessment"
    - privacy_compliance_tracking: "regulation_updates"
```

### ML Performance Tracking

```markdown
Weekly: ML safety pattern effectiveness analysis
Monthly: Model performance optimization review
Quarterly: ML security assessment and template updates
Annually: Complete ML workflow optimization
```

---

**GEMINI ENFORCEMENT STATUS**: ðŸ”’ MANDATORY - ML SAFETY PRIORITY
**COMPLIANCE LEVEL**: 100% Required for all ML responses
**QUALITY GATES**: ML-specific automated checks
**PERFORMANCE MONITORING**: Real-time inference optimization
